# **Онлайн-платформа торговой сети электроники**



### **Технические требования**
- Python 3.8+
- Django 3+
- DRF 3.10+
- PostgreSQL 10+
- Docker

### **Задача**
> - Создайте веб-приложение с API-интерфейсом и админ-панелью.
> - Создайте базу данных, используя миграции Django.

1) Необходимо реализовать модель сети по продажи электроники.

Сеть должна представлять собой иерархическую структуру из трёх уровней:
- Завод
- Розничная сеть
- Индивидуальный предприниматель

2) Каждое звено сети должно обладать следующими элементами:
- **Название.**
- **Контакты:**
- - email,
- - страна,
- - город,
- - улица,
- - номер дома.
- **Продукты:**
- - название,
- - модель,
- - дата выхода продукты на рынок.
- **Поставщик** (предыдущий по иерархии объект сети).
- **Задолженность** перед поставщиком в денежном выражении с точностью до копеек.
- **Время создания** (заполняется автоматически при создании).

3) Сделать вывод в админ-панели созданных объектов.

На странице объекта сети добавить:

- ссылку на «Поставщика»;
- фильтр по названию города;
- admin action, очищающий задолженность перед поставщиком у выбранных объектов.
4) Используя DRF, создать набор представлений:
- CRUD для модели поставщика(запретить обновление через API поля «Задолженность перед поставщиком»);
- Добавить возможность фильтрации объектов по определённой стране.
5) Настроить права доступа к API так, чтобы только активные сотрудники имели доступ к API.

### Инструкция локального развертывания проекта

1. Склонируйте проект на ПК
2. Установите зависимости из файла [requirements.txt](requirements.txt)
3. Создайте базу данных
4. Настройте переменные окружения:
- Создайте файл .env в корневой директории проекта
- Скопируйте в него содержимое файла [.env_example](.env_example) и подставьте свои значения
5. Примените миграции командой:
> python manage.py migrate
6. Запустите сервер командой:
> python manage.py runserver

### Инструкция для запуска проекта в Docker
1. Убедитесь что Docker установлен в вашей системе
2. Склонируйте данный репозиторий
3. Настройка файла .env
- Создайте файл .env в корневой директории проекта.
- В файле .env укажите необходимые переменные окружения. Порт, пароль и др.
4. Запуск контейнеров Docker
- Откройте терминал и перейдите в корневую директорию проекта
- запустите команду
>docker-compose up -d --build
- Дождитесь пока все контейнеры успешно запустятся.

5. Проверка работы проекта

Откройте веб-браузер и перейдите по указанному вами адресу или порту
6. Остановка контейнеров

Чтобы остановить контойнеры, введите в терминал команду
>docker-compose down

7. Административная панель
- Создайте администратора(суперпользователь) выполнив команду
> python manage.py csu

- Откройте административную панель по адресу http://localhost:8000/admin/ и введите e-mail и пароль суперпользователя

#### Фикстуры

Для заполнения базы данных можно воспользоваться файлом [data_base.json](fixtures%2Fdata_base.json). Выполнив команду:
>python manage.py loaddata fixtures\data_base.json

### API Документация

- Swagger - http://127.0.0.1:8000/swagger/
- Redoc - http://127.0.0.1:8000/redoc/